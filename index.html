<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Price Calculator</title>

  <!-- Mobile viewport for better zoom / scaling on phones -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  <!-- iOS "Add to Home Screen" support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Price Calculator">
  <!-- Optional: provide icon.png (180x180) next to index.html -->
  <link rel="apple-touch-icon" sizes="180x180" href="/icon.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="any" href="https://github.com/dauphintje/PriceCalculator/blob/main/icon.png">
  <link rel="shortcut icon" type="image/png" href="https://github.com/dauphintje/PriceCalculator/blob/main/icon.png">

  <!-- PWA manifest (optional, for Android / Chrome) -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f172a">

  <!-- Pico.css from CDN -->
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">

  <!-- Your overrides -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="top-bar">
    <div class="container top-bar-inner">
      <div class="top-bar-brand">
        <h1 class="app-title" aria-label="Price calculator">Price Calculator</h1>
        <button class="menu-toggle" type="button" aria-expanded="false" aria-label="Toggle menu">
          <span class="menu-toggle-icon" aria-hidden="true">☰</span>
        </button>
      </div>

      <nav class="top-bar-menu" aria-label="Main">
        <div class="top-bar-row">
          <label>
            List
            <select id="listSelect"></select>
          </label>
        </div>

        <div class="top-bar-row list-tools">
          <label>
            New list
            <input type="text" id="newListName" placeholder="e.g. Groceries">
          </label>

          <div class="list-actions">
            <button id="createListBtn">Create</button>
            <button id="clearItemsBtn" class="secondary">Clear items</button>
            <button id="deleteListBtn" class="secondary contrast">Delete list</button>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main class="container app-main">
    <!-- Info / error messages -->
    <section id="messageArea" aria-live="polite"></section>

    <!-- ITEMS -->
    <section>
      <h2>Items</h2>

      <!-- Add item -->
      <form id="addItemForm">
        <div class="grid">
          <label>
            Item name
            <input type="text" id="itemName" required>
          </label>
          <label>
            Price
            <input type="number" id="itemPrice" step="0.01" min="0" required>
          </label>
        </div>
        <button type="submit">Add to list</button>
      </form>

      <!-- Tools -->
      <div class="toolbar">
        <div class="grid">
          <label>
            Search items
            <input type="search" id="searchInput" placeholder="e.g. milk, snacks">
          </label>
          <label>
            Sort
            <select id="sortSelect">
              <option value="none">None</option>
              <option value="name">By name</option>
              <option value="price">By price</option>
            </select>
          </label>
        </div>
      </div>

      <!-- Table -->
      <table id="itemsTable">
        <thead>
          <tr>
            <th>Item</th>
            <th style="width: 110px;">Price</th>
            <th style="width: 140px;">Actions</th>
          </tr>
        </thead>
        <tbody>
          <!-- JS adds rows here -->
        </tbody>
      </table>

      <p><strong>Total:</strong> <span id="totalPrice">0.00</span></p>

      <div class="grid">
        <label>
          Number of people
          <input type="number" id="splitPeople" min="1" value="1">
        </label>
        <label>
          Per person
          <input type="text" id="perPerson" readonly>
        </label>
      </div>
    </section>

    <!-- SHARE / IMPORT -->
    <section>
      <h2>Share &amp; Import</h2>

      <article>
        <h3>Share this list</h3>
        <p>Copy this code and send it to a friend so they can import your list.</p>
        <label>
          Share code
          <textarea id="shareCode" rows="3" readonly></textarea>
        </label>
        <div class="share-menu">
          <button id="refreshShareCodeBtn" type="button">Share options</button>
          <div class="share-menu-options" id="shareMenuOptions" hidden>
            <button type="button" data-share-action="whatsapp">Share via WhatsApp</button>
            <button type="button" data-share-action="sms">Share via SMS</button>
            <button type="button" data-share-action="copy">Copy code</button>
          </div>
        </div>

        <h4>Text summary</h4>
        <p>Generate a simple text summary you can paste anywhere.</p>
        <button id="generateSummaryBtn" class="secondary">Generate summary</button>
        <label>
          Summary
          <textarea id="summaryText" rows="4" readonly></textarea>
        </label>
      </article>

      <article>
        <h3>Import someone’s list</h3>
        <p>Paste a share code below and merge into the current list.</p>
        <label>
          Import code
          <textarea id="importCode" rows="3"></textarea>
        </label>
        <button id="importBtn">Import &amp; Merge</button>
      </article>
    </section>
  </main>

  <div class="dialog-backdrop" id="dialogBackdrop" hidden>
    <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="dialogTitle">
      <h3 id="dialogTitle"></h3>
      <div id="dialogContent"></div>
      <div class="dialog-actions">
        <button type="button" class="secondary" id="dialogCancel">Cancel</button>
        <button type="button" id="dialogConfirm">Confirm</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>

